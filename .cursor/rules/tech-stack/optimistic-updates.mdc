## Optimistic Updates Pattern (낙관적 업데이트 패턴) - Critical

### When to Use
- **Non-critical updates**: Profile, settings, preferences
- **High success rate operations**: Toggle switches, simple updates
- **User-initiated actions**: Where immediate feedback is expected

### Implementation Pattern

1. **UiState에 needsRollback 플래그 추가**:
```kotlin
data class MyUiState(
    val success: Boolean = false,
    val needsRollback: Boolean = false // Optimistic update 실패 시 rollback 필요
)
```

2. **ViewModel에서 Optimistic Update 구현**:
```kotlin
fun updateSomething() {
    viewModelScope.launch {
        // Optimistic: 즉시 성공 상태로 설정
        _uiState.update { 
            it.copy(success = true, needsRollback = false) 
        }
        
        // 백그라운드에서 실제 API 호출
        useCase.update()
            .onFailure { e ->
                // Rollback: 성공 상태 취소 및 에러 표시
                _uiState.update {
                    it.copy(
                        success = false,
                        needsRollback = true,
                        errorMessage = mapErrorToUserMessage(e)
                    )
                }
            }
    }
}
```

3. **Screen에서 Rollback 처리**:
```kotlin
LaunchedEffect(uiState.success, uiState.needsRollback) {
    if (uiState.needsRollback) {
        viewModel.clearSuccess()
        viewModel.clearRollback()
        return@LaunchedEffect
    }
    
    if (uiState.success && !uiState.needsRollback) {
        // Navigation or success feedback
    }
}
```

### Rollback Handling
- **Navigation 취소**: `needsRollback`이 true면 navigation을 취소
- **에러 표시**: Rollback 시 에러 메시지를 사용자에게 표시
- **상태 초기화**: Rollback 후 `clearRollback()` 호출하여 상태 초기화

### Avoid For
- Security-critical operations (password changes - use with caution)
- Financial transactions
- Irreversible operations
- Operations requiring server-side validation
