---
description: Git 작업 및 브랜치 관리 정책
globs: "**/*"
alwaysApply: true
---

# Git & Commit Rules (커밋 규칙)

## ⚠️ GIT PROTOCOL - STRICT ENFORCEMENT

### 5. 검증 절차 (Critical)
**푸시 명령 생성 전, 현재 브랜치가 `main`/`develop`이 아닌지 반드시 먼저 검증하시오.**
- `git branch --show-current`로 현재 브랜치 확인
- 만약 `main`이나 `develop`이라면 작업을 중단하고 경고 메시지를 출력하시오
- **물리적 제어**: 프로젝트 루트의 `scripts/pre-push-check.sh` 스크립트를 Git Hook으로 설정하여 시스템 레벨에서 차단하세요.
  - 설정 방법: `cp scripts/pre-push-check.sh .git/hooks/pre-push && chmod +x .git/hooks/pre-push`
### 8. 브랜치 정리 규칙 (Branch Cleanup Rule) - Critical
**`main`에 성공적으로 병합된 이후(그리고 필요 시 푸시 완료 후) 자동으로 병합된 브랜치를 정리합니다.**

#### 자동 정리 조건
- **푸시 완료 후 자동 실행**: 작업 브랜치를 푸시한 후, `main` 브랜치에 병합된 브랜치를 자동으로 삭제합니다.
- **삭제 대상**:
  * `main` 브랜치에 병합된 로컬 브랜치 (`git branch --merged main`)
  * 현재 브랜치가 아닌 브랜치
  * `main`, `master`, `develop` 브랜치가 아닌 브랜치

## Conventional Commits
커밋 메시지는 아래 형식을 따릅니다:
`type(scope): subject`

- **PR 제목**: Pull Request 생성 시에도 동일한 `type(scope): subject` 형식을 사용합니다. (`pull-request-review.mdc` 참고)
- **Types**:
  - `feat`: 새로운 기능 추가
  - `fix`: 버그 수정
  - `refactor`: 코드 리팩토링 (기능 변경 없음)
  - `style`: 포맷팅, 세미콜론 누락 등 (코드 변경 없음)
  - `docs`: 문서 수정
  - `test`: 테스트 추가/수정
  - `chore`: 빌드 태스크, 패키지 매니저 설정 등
  - `build`: 빌드 시스템 또는 외부 종속성 변경
  - `ci`: CI 설정 파일 및 스크립트 변경
  - `perf`: 성능 개선

### Commitlint Line Length Rules (CI 강제)
**CI에서 `commitlint`가 커밋 메시지를 검증합니다. 다음 규칙을 반드시 준수하세요.**

- **PR 통과 조건:** PR **제목**이 commitlint(Conventional Commits) 규칙을 만족해야 합니다.

1. **Subject Line (제목)**: 최대 100자 (`header-max-length`)
2. **Body Line (본문 각 줄)**: 최대 100자 (`body-max-line-length`)
3. **Footer Line (꼬리말 각 줄)**: 최대 100자 (`footer-max-line-length`)

#### 본문 작성 규칙
- 본문의 **모든 줄**이 100자를 초과하면 안 됩니다
- 긴 설명은 줄바꿈으로 나누어 작성하세요
- 함수명, 클래스명 등이 길면 줄을 나누어 작성하세요
