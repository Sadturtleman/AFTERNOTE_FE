---
description: 브랜치 작업 및 워크플로우 규칙
globs: "**/*"
alwaysApply: true
---

# Branch Workflow Rules (브랜치 작업 규칙)

## 브랜치 전환 가이드 (권장)

**사용자가 어떤 브랜치에서 작업을 요청하든, 아래 절차를 권장합니다:**

2. **브랜치 선택 기준**
   - 작업 내용을 분석하여 적절한 브랜치 타입을 결정합니다:
     * 새로운 기능 추가 → `feat/{feature-name}`
     * 버그 수정 → `fix/{bug-description}`
     * 문서 수정 → `docs/{document-name}`
     * 설정/도구 변경 → `chore/{tool-name}`
     * 리팩토링 → `refactor/{component-name}`

3. **예외: 현재 브랜치가 작업 내용과 일치하는 경우**
   - 현재 브랜치가 작업 요청 내용과 정확히 일치하는 경우에만 현재 브랜치에서 작업합니다
   - 예: `feat/login-screen` 브랜치에서 로그인 화면 관련 작업을 요청한 경우

### 규칙

2. **브랜치 네이밍 규칙**
   - `feat/`: 새로운 기능
   - `fix/`: 버그 수정
   - `docs/`: 문서 수정
   - `chore/`: 기타 작업 (설정, 도구 등)
   - `refactor/`: 리팩토링

3. **작업 흐름**
   ```
   사용자 작업 요청
   → 현재 브랜치 확인
   → 작업 내용 분석
   → 코드 생성/수정
   → 변경사항 커밋
   → 필요시 메인에 병합
   → (병합 완료 후) 브랜치 정리
   ```

4. **구현 요구 시 브랜치 사용 가이드 (권장)**
   - 브랜치 이름은 작업 내용을 명확히 나타내는 것을 권장합니다.
     - 예: `feat/add-custom-radio-button`, `fix/text-field-padding`, `refactor/move-component-to-core`

5. **병합 제안 규칙 (Merge Suggestion Rules) - 안전 우선**
   - **병합 자동 실행 금지**: 절대 자동으로 병합하지 않습니다. 대신 병합이 필요한 경우 사용자에게 제안만 합니다.
   - **병합 제안 조건**: 작업이 완료되고 다음 조건을 만족하는 경우 병합을 제안할 수 있습니다:
     * 작업이 완료되었고 테스트가 통과한 경우
     * 다른 브랜치와의 충돌이 없는 경우

6. **예외 상황**
   - 현재 브랜치의 주제와 직접 관련된 변경은 현재 브랜치에서 작업 가능
   - 긴급한 버그 수정은 별도 브랜치 생성 후 메인에 병합

7. **⚠️ Critical: Main 브랜치 버전 제약 규칙 (Version Constraint Rule)**
   - **원칙**: 작업 브랜치의 의존성 버전(예: AGP, Kotlin 등)은 main 브랜치의 버전을 초과하지 않아야 합니다.
   - **예외**: main 브랜치 업그레이드가 작업의 목적인 경우는 예외로 합니다 (예: `chore(gradle): upgrade AGP to X.Y.Z`).
   - **적용 대상**: 
     * Android Gradle Plugin (AGP)
     * Kotlin 버전
     * 기타 주요 빌드 도구 버전

8. **브랜치 정리 규칙 (Branch Cleanup Rule) - Critical**
   - `main`에 **성공적으로 병합된 브랜치**는 작업이 끝났다면 정리(삭제)합니다.(`main`/`master`/`develop` 및 현재 브랜치는 제외)
   - 자세한 조건/명령어는 `.cursor/rules/workflow/git-policy.mdc`의 “Branch Cleanup Rule”을 따릅니다.